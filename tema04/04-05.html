<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolos de Correo Electrónico en Java</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div>Protocolos de Correo Electrónico en Java</div>
    </header>

    <section class="contenido-didactico">
        <h1>Protocolos de Correo Electrónico en Java</h1>

        <h2>Introducción a los Protocolos de Correo Electrónico</h2>
        <p>Los protocolos de correo electrónico son conjuntos de reglas que permiten la transmisión de mensajes entre servidores y clientes de correo. Los tres protocolos principales son:</p>
        <ul>
            <li><strong>SMTP (Simple Mail Transfer Protocol):</strong> Para envío de correos</li>
            <li><strong>POP3 (Post Office Protocol version 3):</strong> Para recepción de correos</li>
            <li><strong>IMAP (Internet Message Access Protocol):</strong> Para gestión avanzada de correos</li>
        </ul>

        <h3>Comparativa de Protocolos</h3>
        <table>
            <thead>
                <tr>
                    <th>Característica</th>
                    <th>SMTP</th>
                    <th>POP3</th>
                    <th>IMAP</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Puerto (No SSL)</td>
                    <td>25</td>
                    <td>110</td>
                    <td>143</td>
                </tr>
                <tr>
                    <td>Puerto (SSL)</td>
                    <td>465/587</td>
                    <td>995</td>
                    <td>993</td>
                </tr>
                <tr>
                    <td>Función Principal</td>
                    <td>Envío</td>
                    <td>Descarga</td>
                    <td>Sincronización</td>
                </tr>
                <tr>
                    <td>Estado de Mensajes</td>
                    <td>N/A</td>
                    <td>Local</td>
                    <td>Servidor</td>
                </tr>
                <tr>
                    <td>Múltiples Clientes</td>
                    <td>Sí</td>
                    <td>No</td>
                    <td>Sí</td>
                </tr>
            </tbody>
        </table>

        <h3>SMTP (Simple Mail Transfer Protocol)</h3>
        <p>Protocolo para el envío de correos electrónicos.</p>

        <h4>Ejemplo de Implementación SMTP</h4>
        <pre><code class="language-java">import jakarta.mail.*;
import jakarta.mail.internet.*;
import java.util.Properties;

public class SMTPExample {
    public void sendEmail(String to, String subject, String body) {
        // Configuración del servidor SMTP
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "587");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");

        // Crear sesión con autenticación
        Session session = Session.getInstance(props, new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("usuario@gmail.com", "contraseña");
            }
        });

        try {
            // Crear mensaje
            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("from@gmail.com"));
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(to));
            message.setSubject(subject);
            message.setText(body);

            // Enviar mensaje
            Transport.send(message);

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
}</code></pre>

        <h3>POP3 (Post Office Protocol 3)</h3>
        <p>Protocolo para la descarga de correos electrónicos.</p>

        <h4>Ejemplo de Implementación POP3</h4>
        <pre><code class="language-java">public class POP3Example {
    public void readEmails() {
        Properties props = new Properties();
        props.put("mail.pop3.host", "pop.gmail.com");
        props.put("mail.pop3.port", "995");
        props.put("mail.pop3.ssl.enable", "true");

        Session session = Session.getDefaultInstance(props);

        try {
            // Conectar al servidor POP3
            Store store = session.getStore("pop3s");
            store.connect("pop.gmail.com", "usuario@gmail.com", "contraseña");

            // Abrir carpeta INBOX
            Folder inbox = store.getFolder("INBOX");
            inbox.open(Folder.READ_ONLY);

            // Obtener mensajes
            Message[] messages = inbox.getMessages();
            for (Message message : messages) {
                System.out.println("From: " + message.getFrom()[0]);
                System.out.println("Subject: " + message.getSubject());
                System.out.println("Content: " + message.getContent());
            }

            // Cerrar conexiones
            inbox.close(false);
            store.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}</code></pre>

        <h3>IMAP (Internet Message Access Protocol)</h3>
        <p>Protocolo para la gestión avanzada de correos electrónicos.</p>

        <h4>Ejemplo de Implementación IMAP</h4>
        <pre><code class="language-java">public class IMAPExample {
    public void manageEmails() {
        Properties props = new Properties();
        props.put("mail.imap.host", "imap.gmail.com");
        props.put("mail.imap.port", "993");
        props.put("mail.imap.ssl.enable", "true");

        Session session = Session.getDefaultInstance(props);

        try {
            // Conectar al servidor IMAP
            Store store = session.getStore("imaps");
            store.connect("imap.gmail.com", "usuario@gmail.com", "contraseña");

            // Obtener carpeta y crear nueva si no existe
            Folder inbox = store.getFolder("INBOX");
            inbox.open(Folder.READ_WRITE);

            // Buscar mensajes específicos
            SearchTerm searchTerm = new SubjectTerm("importante");
            Message[] messages = inbox.search(searchTerm);

            // Procesar mensajes
            for (Message message : messages) {
                // Marcar como leído
                message.setFlag(Flags.Flag.SEEN, true);
                
                // Mover a otra carpeta
                Folder destFolder = store.getFolder("Archivado");
                if (!destFolder.exists()) {
                    destFolder.create(Folder.HOLDS_MESSAGES);
                }
                
                Message[] moveMessages = {message};
                inbox.copyMessages(moveMessages, destFolder);
                message.setFlag(Flags.Flag.DELETED, true);
            }

            // Cerrar conexiones
            inbox.close(true);
            store.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}</code></pre>

        <h3>Consideraciones de Seguridad</h3>
        <ul>
            <li>Siempre usar SSL/TLS para conexiones seguras</li>
            <li>Implementar timeouts para evitar conexiones colgadas</li>
            <li>No almacenar credenciales en texto plano</li>
            <li>Manejar excepciones adecuadamente</li>
            <li>Cerrar todas las conexiones después de su uso</li>
        </ul>

        <h3>Mejores Prácticas</h3>
        <ul>
            <li>Usar builder patterns para crear mensajes complejos</li>
            <li>Implementar retry mechanism para conexiones fallidas</li>
            <li>Manejar diferentes tipos de contenido (HTML, adjuntos)</li>
            <li>Implementar logging para debugging</li>
            <li>Usar connection pooling para mejor rendimiento</li>
        </ul>

        <h3>Ejemplo de Manejo de Adjuntos</h3>
        <pre><code class="language-java">public void sendEmailWithAttachment(String to, String subject, String body, String filePath) {
    // ... configuración similar a los ejemplos anteriores ...

    try {
        Message message = new MimeMessage(session);
        // ... configuración básica del mensaje ...

        // Crear el contenido multipart
        Multipart multipart = new MimeMultipart();

        // Parte del texto
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText(body);
        multipart.addBodyPart(messageBodyPart);

        // Parte del adjunto
        messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filePath);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(new File(filePath).getName());
        multipart.addBodyPart(messageBodyPart);

        // Establecer el contenido del mensaje
        message.setContent(multipart);

        Transport.send(message);

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
}</code></pre>

        <h3>Dependencias Maven</h3>
        <p>Para trabajar con correo electrónico en Java, necesitas las siguientes dependencias:</p>
        <pre><code class="language-xml">&lt;!-- Jakarta Mail API (anteriormente JavaMail) --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;
    &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;
    &lt;version&gt;2.0.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- Para soporte de autenticación --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;javax.activation&lt;/groupId&gt;
    &lt;artifactId&gt;activation&lt;/artifactId&gt;
    &lt;version&gt;1.1.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
</body>
</html>