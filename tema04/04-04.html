<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolo HTTP en Java</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div>Protocolo HTTP en Java</div>
    </header>

    <section class="contenido-didactico">
        <h1>Protocolo HTTP en Java</h1>

        <p>HTTP (Hypertext Transfer Protocol) es el protocolo fundamental de la World Wide Web. Es un protocolo de la capa de aplicación para la transmisión de documentos hipermedia, como HTML.</p>

        <h2>Características Principales</h2>
        <ul>
            <li>Protocolo sin estado (stateless)</li>
            <li>Basado en el modelo cliente-servidor</li>
            <li>Independiente del tipo de datos transmitidos</li>
            <li>Extensible mediante headers</li>
            <li>Soporta diferentes métodos de petición</li>
        </ul>

        <h2>Métodos HTTP</h2>
        <p>Los métodos HTTP definen la acción que se desea realizar sobre un recurso determinado.</p>

        <table>
            <thead>
                <tr>
                    <th>Método</th>
                    <th>Descripción</th>
                    <th>Uso Típico</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET</td>
                    <td>Solicitar datos</td>
                    <td>Obtener recursos</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>Enviar datos</td>
                    <td>Crear recursos</td>
                </tr>
                <tr>
                    <td>PUT</td>
                    <td>Actualizar/Reemplazar datos</td>
                    <td>Actualizar recursos</td>
                </tr>
                <tr>
                    <td>DELETE</td>
                    <td>Eliminar datos</td>
                    <td>Borrar recursos</td>
                </tr>
                <tr>
                    <td>PATCH</td>
                    <td>Actualizar parcialmente</td>
                    <td>Modificar recursos</td>
                </tr>
            </tbody>
        </table>

        <h3>Ejemplos de Implementación</h3>
        <p>A continuación se muestra cómo implementar peticiones HTTP básicas en Java utilizando el <code>HttpClient</code> moderno.</p>

<pre><code class="language-java">import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.time.Duration;

public class HTTPExample {
    private final HttpClient httpClient;

    public HTTPExample() {
        this.httpClient = HttpClient.newBuilder()
            .version(HttpClient.Version.HTTP_2)
            .connectTimeout(Duration.ofSeconds(10))
            .build();
    }

    // GET Request
    public String get(String url) throws Exception {
        HttpRequest request = HttpRequest.newBuilder()
            .GET()
            .uri(URI.create(url))
            .header("Accept", "application/json")
            .build();

        HttpResponse&lt;String&gt; response = httpClient.send(
            request, 
            HttpResponse.BodyHandlers.ofString()
        );

        return response.body();
    }

    // POST Request
    public String post(String url, String jsonBody) throws Exception {
        HttpRequest request = HttpRequest.newBuilder()
            .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
            .uri(URI.create(url))
            .header("Content-Type", "application/json")
            .build();

        HttpResponse&lt;String&gt; response = httpClient.send(
            request, 
            HttpResponse.BodyHandlers.ofString()
        );

        return response.body();
    }
}</code></pre>

        <h2>Headers HTTP Comunes</h2>
        <p>Los headers HTTP permiten al cliente y al servidor pasar información adicional con la petición o la respuesta.</p>

        <table>
            <thead>
                <tr>
                    <th>Header</th>
                    <th>Descripción</th>
                    <th>Ejemplo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Content-Type</td>
                    <td>Tipo de contenido</td>
                    <td>application/json</td>
                </tr>
                <tr>
                    <td>Authorization</td>
                    <td>Credenciales</td>
                    <td>Bearer token123</td>
                </tr>
                <tr>
                    <td>Accept</td>
                    <td>Tipos aceptados</td>
                    <td>application/json</td>
                </tr>
                <tr>
                    <td>User-Agent</td>
                    <td>Cliente</td>
                    <td>Mozilla/5.0</td>
                </tr>
            </tbody>
        </table>

        <h3>Ejemplo con Headers Personalizados</h3>

<pre><code class="language-java">public String getWithHeaders(String url) throws Exception {
    HttpRequest request = HttpRequest.newBuilder()
        .GET()
        .uri(URI.create(url))
        .header("Authorization", "Bearer " + token)
        .header("Accept", "application/json")
        .header("User-Agent", "Java HTTP Client")
        .header("Custom-Header", "value")
        .build();

    return httpClient.send(request, HttpResponse.BodyHandlers.ofString()).body();
}</code></pre>

        <h2>Códigos de Estado HTTP</h2>
        <p>Los códigos de estado HTTP indican si una petición HTTP se ha completado correctamente.</p>

        <table>
            <thead>
                <tr>
                    <th>Rango</th>
                    <th>Categoría</th>
                    <th>Ejemplos</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>2xx</td>
                    <td>Éxito</td>
                    <td>200 OK, 201 Created</td>
                </tr>
                <tr>
                    <td>3xx</td>
                    <td>Redirección</td>
                    <td>301 Moved, 304 Not Modified</td>
                </tr>
                <tr>
                    <td>4xx</td>
                    <td>Error Cliente</td>
                    <td>400 Bad Request, 404 Not Found</td>
                </tr>
                <tr>
                    <td>5xx</td>
                    <td>Error Servidor</td>
                    <td>500 Internal Error, 503 Service Unavailable</td>
                </tr>
            </tbody>
        </table>

        <h3>Ejemplo de Manejo de Estados</h3>

<pre><code class="language-java">public void handleResponse(HttpResponse&lt;String&gt; response) {
    int status = response.statusCode();
    
    switch (status) {
        case 200:
            processSuccess(response.body());
            break;
        case 404:
            throw new ResourceNotFoundException("Recurso no encontrado");
        case 401:
            throw new UnauthorizedException("No autorizado");
        case 500:
            throw new ServerException("Error en el servidor");
        default:
            throw new HttpException("Error HTTP: " + status);
    }
}</code></pre>

        <h2>Ejemplos Avanzados</h2>

        <h3>Subida de Archivos</h3>

<pre><code class="language-java">public void uploadFile(String url, Path filePath) throws Exception {
    HttpRequest request = HttpRequest.newBuilder()
        .POST(HttpRequest.BodyPublishers.ofFile(filePath))
        .uri(URI.create(url))
        .header("Content-Type", "application/octet-stream")
        .build();

    HttpResponse&lt;String&gt; response = httpClient.send(
        request, 
        HttpResponse.BodyHandlers.ofString()
    );
}</code></pre>

        <h3>Manejo de Cookies</h3>

<pre><code class="language-java">CookieManager cookieManager = new CookieManager();
HttpClient clientWithCookies = HttpClient.newBuilder()
    .cookieHandler(cookieManager)
    .build();</code></pre>

        <h3>Solicitudes Asíncronas</h3>

<pre><code class="language-java">public CompletableFuture&lt;String&gt; getAsync(String url) {
    HttpRequest request = HttpRequest.newBuilder()
        .GET()
        .uri(URI.create(url))
        .build();

    return httpClient.sendAsync(
        request, 
        HttpResponse.BodyHandlers.ofString()
    ).thenApply(HttpResponse::body);
}</code></pre>

        <h2>Mejores Prácticas</h2>
        <ul>
            <li>Usar timeout para evitar bloqueos indefinidos</li>
            <li>Implementar retry mechanism para fallos temporales</li>
            <li>Manejar correctamente los recursos (close)</li>
            <li>Validar las respuestas del servidor</li>
            <li>Usar pooling de conexiones para mejor rendimiento</li>
            <li>Implementar manejo de errores robusto</li>
        </ul>

        <h2>Seguridad</h2>
        <p>La seguridad es fundamental al trabajar con peticiones HTTP. A continuación se presentan las principales recomendaciones:</p>
        
        <ul>
            <li>Usar HTTPS siempre que sea posible</li>
            <li>Validar certificados SSL</li>
            <li>No exponer información sensible en URLs</li>
            <li>Implementar rate limiting</li>
            <li>Validar entradas y salidas</li>
            <li>Usar tokens de autenticación de manera segura</li>
        </ul>

        <h3>Ejemplo de Configuración SSL</h3>

<pre><code class="language-java">SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(null, trustAllCerts, new SecureRandom());

HttpClient secureClient = HttpClient.newBuilder()
    .sslContext(sslContext)
    .build();</code></pre>

        <h2>Dependencias Maven</h2>
        <p>Para trabajar con HTTP en Java, es recomendable incluir las siguientes dependencias en tu proyecto Maven:</p>

<pre><code class="language-xml">&lt;!-- Para HTTP Client moderno (Java 11+) --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;
    &lt;artifactId&gt;httpclient5&lt;/artifactId&gt;
    &lt;version&gt;5.2.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- Para manejo de JSON --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
    &lt;version&gt;2.15.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>

    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
</body>
</html>